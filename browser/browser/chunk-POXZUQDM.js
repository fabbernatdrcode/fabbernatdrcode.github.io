import"./chunk-VN3CQEPZ.js";import{a as J,b as K}from"./chunk-M2MH6365.js";import{g as y,h as k}from"./chunk-BPCAL4ZU.js";import{c as V,e as A,h as B,k as R,l as T,m as H}from"./chunk-5VJ2GAK6.js";import{B as z,C as j,E as O,F as f,G as P,H as I,M as D,N,v as w,x as F,z as m}from"./chunk-WNAMUAWB.js";import{a as q,b as G}from"./chunk-N54XC5ZN.js";import{g as S,l as E,m as L}from"./chunk-BN2YJQL2.js";import{Db as s,Ib as c,Mb as t,Nb as i,Ob as p,Sb as C,Wb as v,Xb as u,fc as o,gb as a,hc as _,lb as g,oc as M,sb as b,ta as h,ua as x,xb as d}from"./chunk-4Y4LFOUG.js";var W=()=>["/signup"];function X(n,l){n&1&&(t(0,"div",1)(1,"h2"),o(2,"Bejelentkez\xE9s folyamatban"),i(),p(3,"mat-spinner",3),t(4,"p"),o(5,"K\xE9rem v\xE1rjon..."),i()())}function Y(n,l){if(n&1&&(t(0,"div",9),o(1),i()),n&2){let e=u(2);a(),_(" ",e.loginError," ")}}function Z(n,l){if(n&1){let e=C();t(0,"form",4),v("ngSubmit",function(){h(e);let Q=u();return x(Q.login())}),t(1,"mat-form-field",5)(2,"mat-label"),o(3,"E-mail c\xEDm"),i(),p(4,"input",6),t(5,"mat-icon",7),o(6,"email"),i()(),t(7,"mat-form-field",5)(8,"mat-label"),o(9,"Jelsz\xF3"),i(),p(10,"input",8),t(11,"mat-icon",7),o(12,"lock"),i()(),d(13,Y,2,1,"div",9),t(14,"button",10),o(15,"Bejelentkez\xE9s"),i(),t(16,"button",11),o(17,"Regisztr\xE1ci\xF3"),i()()}if(n&2){let e=u();a(4),s("formControl",e.email),a(6),s("formControl",e.password),a(3),c(e.loginError?13:-1),a(3),s("routerLink",M(4,W))}}var U=class n{constructor(l,e){this.authService=l;this.router=e}email=new f("",[m.required,m.email]);password=new f("",[m.required,m.minLength(6)]);isLoading=!1;loginError="";showLoginForm=!0;authSubscription;login(){if(this.email.invalid){this.loginError="Adjon meg egy val\xF3s e-mail c\xEDmet!";return}if(this.password.invalid){this.loginError="A jelsz\xF3nak legal\xE1bb 6 karakterb\u0151l kell \xE1llnia";return}let l=this.email.value||"",e=this.password.value||"";this.isLoading=!0,this.showLoginForm=!1,this.loginError="",this.authService.signIn(l,e).then(r=>{console.log("Login successful:",r.user),this.authService.updateLoginStatus(!0),this.router.navigateByUrl("/home")}).catch(r=>{switch(console.error("Login error:",r),this.isLoading=!1,this.showLoginForm=!0,r.code){case"auth/user-not-found":this.loginError="Nem tal\xE1lhat\xF3 felhaszn\xE1l\xF3i fi\xF3k ezzel az e-mail c\xEDmmel!";break;case"auth/wrong-password":this.loginError="Hib\xE1s jelsz\xF3!";break;case"auth/invalid-credential":this.loginError="Hib\xE1s e-mail c\xEDm vagy jelsz\xF3!";break;default:this.loginError="Hiba a bejelentkez\xE9s k\xF6zben. \xCDrj a job.fabbernat@gmail.com e-mail c\xEDmre a hiba elh\xE1r\xEDt\xE1s\xE1hoz! "}})}ngOnDestroy(){this.authSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)(g(w),g(E))};static \u0275cmp=b({type:n,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"login-container"],[1,"loading-container"],[1,"login-form"],["diameter","50"],[1,"login-form",3,"ngSubmit"],["appearance","outline"],["matInput","","type","email",3,"formControl"],["matSuffix",""],["matInput","","type","password",3,"formControl"],[1,"error-message"],["mat-flat-button","","color","primary","type","submit"],["mat-flat-button","",3,"routerLink"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"h1"),o(2,"Bejelentkez\xE9s"),i(),d(3,X,6,0,"div",1)(4,Z,18,5,"form",2),i()),e&2&&(a(3),c(r.isLoading?3:-1),a(),c(r.showLoginForm?4:-1))},dependencies:[S,D,P,F,z,j,O,N,I,R,B,V,A,H,T,k,y,G,q,K,J,L],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0003;text-align:center}.login-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px 0}.loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-size:16px}"]})};export{U as LoginComponent};
